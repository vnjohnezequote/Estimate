<UserControl
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:prism="http://prismlibrary.com/"
             xmlns:viewModels="clr-namespace:DrawingModule.ViewModels"
             xmlns:local="clr-namespace:DrawingModule.Views"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             xmlns:syncfusion="http://schemas.syncfusion.com/wpf"
             xmlns:pt="http://propertytools.org/wpf"
             xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
             xmlns:applicationConverter="clr-namespace:ApplicationConverter;assembly=ApplicationConverter"
             xmlns:sys="clr-namespace:System;assembly=mscorlib"
             xmlns:appModelEnum="clr-namespace:AppModels.Enums;assembly=AppModels"
             xmlns:entities="clr-namespace:devDept.Eyeshot.Entities;assembly=devDept.Eyeshot.Control.Wpf.v12"
             x:Class="DrawingModule.Views.SelectedEntityPropertiesView"
             prism:ViewModelLocator.AutoWireViewModel="True"
             d:DataContext="{d:DesignInstance {x:Type viewModels:SelectedEntityPropertiesViewModel}, IsDesignTimeCreatable=True}"
             x:Name="EntityProperty"
             mc:Ignorable="d"
             d:DesignHeight="450" d:DesignWidth="800">
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/AppThemes;component/DarkTheme/DarkStyle.xaml"/>
                <ResourceDictionary>
                    <ObjectDataProvider x:Key="ColorMethods"
                                        MethodName="GetValues" ObjectType="{x:Type sys:Enum}">
                        <ObjectDataProvider.MethodParameters>
                            <x:Type TypeName="entities:colorMethodType"/>
                        </ObjectDataProvider.MethodParameters>
                    </ObjectDataProvider>

                    <applicationConverter:ColorToBrushConverter x:Key="ColorToBrushConverter"/>
                    <applicationConverter:ColorToColorConverter x:Key="ColorToColorConverter"/>
                    <applicationConverter:ColorToStringConverter x:Key="ColorToStringConverter"/>
                </ResourceDictionary>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </UserControl.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="100" MinWidth="100"/>
            <ColumnDefinition Width="1"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>

        </Grid.RowDefinitions>
        <TextBlock Text="Layer" Grid.Row="0" Grid.Column="0" VerticalAlignment="Center" HorizontalAlignment="Left" Margin="15 5 0 5" Visibility="{Binding LayerVisibility}"/>
        <TextBlock Text="Color" Grid.Row="1" Grid.Column="0" VerticalAlignment="Center" HorizontalAlignment="Left" Margin="15 5 0 5" Visibility="{Binding ColorVisibility}"/>
        <TextBlock Text="Level" Grid.Row="2" Grid.Column="0" VerticalAlignment="Center" HorizontalAlignment="Left" Margin="15 5 0 5" Visibility="{Binding LevelVisibility}"/>
        <TextBlock Text="Color By" Grid.Row="3" Grid.Column="0" VerticalAlignment="Center" HorizontalAlignment="Left" Margin="15 5 0 5" Visibility="{Binding ColorMethodVisibility}"/>
        <TextBlock Text="X" Grid.Row="4" Grid.Column="0" VerticalAlignment="Center" HorizontalAlignment="Left" Margin="15 5 0 5" />
        <TextBlock Text="Y" Grid.Row="5" Grid.Column="0" VerticalAlignment="Center" HorizontalAlignment="Left" Margin="15 5 0 5" />
        <GridSplitter Grid.Column="1"
                      Grid.Row="0"
                      Grid.RowSpan="3"
                      ResizeDirection="Columns" 
                      ResizeBehavior="PreviousAndNext"
                      HorizontalAlignment="Left"
                      VerticalAlignment="Stretch"
                      Margin="-3 -3 -3 -3"
                      BorderThickness="3"
                      BorderBrush="Transparent"/>
        <ComboBox Grid.Row="0"
                  Grid.Column="2"
                  Style="{StaticResource MahApps.Styles.ComboBox}"
                  Margin="0 5 0 5"
                  Visibility="{Binding LayerVisibility}"
                  ItemsSource="{Binding LayerManager.Layers}"
                  SelectedValuePath="Name"
                  SelectedValue="{Binding Path=SelectedEntity.LayerName}">
            <ComboBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <Rectangle Fill="{Binding Color,Converter={StaticResource ColorToBrushConverter}}" Width="16" Height="16" Margin="0 2 5 2"/>
                        <TextBlock Text="{Binding Name}" Foreground="{Binding Color, Converter={StaticResource ColorToBrushConverter}}"/>
                    </StackPanel>
                </DataTemplate>
            </ComboBox.ItemTemplate>
        </ComboBox>
        <syncfusion:ColorPicker Grid.Row="1"
                                Grid.Column="2"
                                Background="Transparent"
                                Margin="0 5 0 5"
                                Visibility="{Binding ColorVisibility}"
                                Color="{Binding SelectedEntity.Color, Mode=TwoWay, Converter={StaticResource ColorToColorConverter}}"
                                Foreground="{Binding SelectedEntity.Color,Mode=OneWay, Converter={StaticResource ColorToBrushConverter}}"/>
        <ComboBox Grid.Row="2" 
                  Grid.Column="2"
                  Style="{StaticResource MahApps.Styles.ComboBox}"
                  Margin="0 5 0 5"
                  Visibility="{Binding LevelVisibility}"
                  ItemsSource="{Binding Levels}"
                  DisplayMemberPath="LevelName"
                  SelectedValuePath="LevelName"
                  SelectedValue="{Binding Path= SelectedEntity.WallLevelName}"/>
        <ComboBox Grid.Row="3"
                  Grid.Column="2"
                  Style="{StaticResource MahApps.Styles.ComboBox}"
                  Visibility="{Binding ColorMethodVisibility}"
                  Margin="0 5 0 5"
                  ItemsSource="{Binding Source={StaticResource ColorMethods}}"
                  SelectedItem="{Binding Path=SelectedEntity.ColorMethod}"/>
        <TextBox Grid.Row="4"
                 Grid.Column="2"
                 Text="{Binding SelectedEntity.X}"/>
        <TextBox Grid.Row="5"
                 Grid.Column="2"
                 Text="{Binding SelectedEntity.Y}"/>
    </Grid>

</UserControl>
